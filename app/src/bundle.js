(()=>{var o={54:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(191);o.exports=(o,t,e)=>{const g=r(o,e),a=e.split(":");e=a.pop();const[l,u]=i(e.split("."));if(!l||!(u in l))return void console.log(`[DOMLogger++] ${e} (attribute) does not exist!`);try{if("function"==typeof l[u])return void console.log(`[DOMLogger++] ${e} can't be a function or a class!`)}catch{}const f=s(l,u);if(f.configurable){var p;if(!f.set||!f.get)try{p=l[u]}catch{if(f.set||!f.get)return void console.log(`[DOMLogger++] ${e} can't be hook for now!`);if(a.includes("set"))return void console.log(`[DOMLogger++] Only the getter can be hooked for ${e}, remove set!`)}Object.defineProperty(l,u,{get:function(){return f.get?output=f.get.call(this):output=p,a.includes("get")&&(g.hookFunction&&(output=Function("output",g.hookFunction)(output)),n(o,t,`${this.nodeName?`get:${this.nodeName.toLowerCase()}.${u}`:e}`,JSON.stringify(output),g)),output},set:function(r){if(a.includes("set")&&r){const i=c(g.match,r,!0),s=c(g["!match"],r,!1);g.hookFunction&&(r=Function("args",g.hookFunction)(r)),!s&&i&&n(o,t,`${this.nodeName?`set:${this.nodeName.toLowerCase()}.${u}`:e}`,JSON.stringify(r),g)}return f.set?f.set.call(this,r):void(p=r)}})}else console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`)}},746:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(191);o.exports=(o,t,e)=>{const g=r(o,e);var[a,l]=i(e.split("."));a&&l in a?"function"==typeof a[l]?s(a,l).configurable?a[l]=new Proxy(a[l],{construct:function(r,i){const s=c(g.match,i,!0),a=c(g["!match"],i,!1);return g.hookFunction&&(i=Function("args",g.hookFunction)(i)),!a&&s&&n(o,t,e,JSON.stringify(i),g),new r(...i)}}):console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`):console.log(`[DOMLogger++] ${e} is not a class!`):console.log(`[DOMLogger++] ${e} (class) does not exist!`)}},3:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i}=e(191),s={function:e(4),class:e(746),attribute:e(54)};o.exports=(o,t,e)=>{const c=e.split(":"),g=c.pop(),a=r(o,c.slice(1).join(":")),l=c.slice(1).pop(),u=setInterval((()=>{var[e,r]=i(l.split("."));e&&r in e&&(clearInterval(u),"attribute"!==c[0]||"set"!==c[1]&&"set"!==c[2]||n(o,t,c.slice(1).join(":"),JSON.stringify(e[r]),a),s[c[0]](t,c.slice(1).join(":")))}),g)}},454:(o,t,e)=>{const n=e(54),{log:r,getConfig:i,checkRegexs:s}=e(191);o.exports=(o,t,e)=>{const c=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(n,g,a){if(e.includes(n)){const e=i(o,n),c=s(e.match,`${g}${a?`;options=${JSON.stringify(a)}`:""}`,!0),l=s(e["!match"],`${g}${a?`;options=${JSON.stringify(a)}`:""}`,!1);e.hookFunction&&(args=Function("args",e.hookFunction)(g)),!l&&c&&r(o,t,`on${n}`,`${g}${a?`;options=${JSON.stringify(a)}`:""}`,e)}return c.call(this,n,g,a)};for(const o of e)`on${o}`in window?n(t,`set:on${o}`):console.log(`[DOMLogger++] on${o} (event) does not exist!`)}},4:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(191);o.exports=(o,t,e)=>{const g=r(o,e);var[a,l]=i(e.split("."));if(!a||!(l in a))return void console.log(`[DOMLogger++] ${e} (function) does not exist!`);if("function"!=typeof a[l])return void console.log(`[DOMLogger++] ${e} is not a function!`);if(!s(a,l).configurable)return void console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`);const u=a[l];a[l]=new Proxy(a[l],{apply:function(r,i,s){const a=c(g.match,s,!0),l=c(g["!match"],s,!1);return g.hookFunction&&(s=Function("args",g.hookFunction)(s)),!l&&a&&n(o,t,e,JSON.stringify(s),g),Reflect.apply(u,i,s)}})}},191:o=>{const t=(o,t,e)=>{if(!o)return e;void 0===t&&(t="undefined"),"function"==typeof t&&(t=t.toString());for(let e of o){try{new RegExp(e)}catch{console.log(`[DOMLogger++] ${e} (regex) is invalid!`);continue}if(JSON.stringify(t).match(e))return!0}return!1};o.exports={log:async(o,e,n,r,i)=>{var s=(()=>{let o=(new Error).stack;return o=o.split("\n"),o.filter((o=>!o.includes("/src/bundle.js")))})();"Error"===s[0]&&s.shift();var c=s[0];if(c=await(async o=>{const t=(new TextEncoder).encode(o),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map((o=>o.toString(16).padStart(2,"0"))).join("")})(c),window?.domlogger_debug_canary===c)debugger;var g=!1,a=!1;if(i.alert){const o=t(i.alert.match,r,!0);!t(i.alert["!match"],r,!1)&&o&&(g=!0,i.alert.notification&&(a=!0))}let l={ext:"domlogger",date:Date.now(),href:location.href,type:e,hook:o,frame:top===self?"top":"subframe",sink:n,data:r,trace:s,debug:c,badge:g,notification:a};window.originalPostMessage?window.originalPostMessage(l,"*"):window.postMessage(l,"*")},getConfig:(o,t)=>{var e=window.hooksConfig["*"]?window.hooksConfig["*"]:{},n=window.hooksConfig[o]?window.hooksConfig[o]:{},r=window.hooksConfig[t]?window.hooksConfig[t]:{};return Object.assign({},e,n,r)},getTargets:o=>{var t=o.pop(),e=window;"window"===o[0]&&o.shift();for(const t of o){if(!(t in e))return[null,null];e=e[t]}return[e,t]},getOwnPropertyDescriptor:(o,t)=>{for(;o;){const e=Object.getOwnPropertyDescriptor(o,t);if(e)return e;o=Object.getPrototypeOf(o)}},checkRegexs:t}}},t={};function e(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return o[n](i,i.exports,e),i.exports}(()=>{const o={function:e(4),class:e(746),attribute:e(54),event:e(454),custom:e(3)},t=new URL(document.currentScript.src),n=new URLSearchParams(t.search),r=JSON.parse(n.get("hookSettings"));window.hooksTargets=r.hooks,window.hooksConfig=r.config,window.domlogger_debug_canary=n.get("debugCanary");for(const[t,e]of Object.entries(window.hooksTargets))for(const[n,r]of Object.entries(e))if("event"!==n)for(const e of r)"postMessage"===e.split(".").pop()&&(window.originalPostMessage=window.postMessage),o[n](n,t,e);else o[n](n,t,r)})()})();