(()=>{var o={11:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(484);o.exports=(o,t)=>{const e=r(t),g=t.split(":");t=g.pop();const[a,l]=i(t.split("."));if(!a||!(l in a))return void console.log(`[DOMLogger++] ${t} (attribute) does not exist!`);try{if("function"==typeof a[l])return void console.log(`[DOMLogger++] ${t} can't be a function or a class!`)}catch{}const u=s(a,l);if(u.configurable){var f;if(!u.set||!u.get)try{f=a[l]}catch{if(u.set||!u.get)return void console.log(`[DOMLogger++] ${t} can't be hook for now!`);if(g.includes("set"))return void console.log(`[DOMLogger++] Only the getter can be hooked for ${t}, remove set!`)}Object.defineProperty(a,l,{get:function(){return u.get?output=u.get.call(this):output=f,g.includes("get")&&(e.hookFunction&&(output=Function("output",e.hookFunction)(output)),n(o,`${this.nodeName?`get:${this.nodeName.toLowerCase()}.${l}`:t}`,JSON.stringify(output),e)),output},set:function(r){if(g.includes("set")&&r){const i=c(e.match,r,!0),s=c(e["!match"],r,!1);e.hookFunction&&(r=Function("args",e.hookFunction)(r)),!s&&i&&n(o,`${this.nodeName?`set:${this.nodeName.toLowerCase()}.${l}`:t}`,JSON.stringify(r),e)}return u.set?u.set.call(this,r):void(f=r)}})}else console.log(`[DOMLogger++] ${t} is not configurable, can't hook it!`)}},437:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(484);o.exports=(o,t)=>{const e=r(t);var[g,a]=i(t.split("."));g&&a in g?"function"==typeof g[a]?s(g,a).configurable?g[a]=new Proxy(g[a],{construct:function(r,i){const s=c(e.match,i,!0),g=c(e["!match"],i,!1);return e.hookFunction&&(i=Function("args",e.hookFunction)(i)),!g&&s&&n(o,t,JSON.stringify(i),e),new r(...i)}}):console.log(`[DOMLogger++] ${t} is not configurable, can't hook it!`):console.log(`[DOMLogger++] ${t} is not a class!`):console.log(`[DOMLogger++] ${t} (class) does not exist!`)}},231:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i}=e(484),s={function:e(902),class:e(437),attribute:e(11)};o.exports=(o,t)=>{const e=t.split(":"),c=e.pop(),g=r(e.slice(1).join(":")),a=e.slice(1).pop(),l=setInterval((()=>{var[t,r]=i(a.split("."));t&&r in t&&(clearInterval(l),"attribute"!==e[0]||"set"!==e[1]&&"set"!==e[2]||n(o,e.slice(1).join(":"),JSON.stringify(t[r]),g),s[e[0]](o,e.slice(1).join(":")))}),c)}},88:(o,t,e)=>{const n=e(11),{log:r,getConfig:i,checkRegexs:s}=e(484);o.exports=(o,t)=>{const e=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(n,c,g){if(t.includes(n)){const t=i(n),e=s(t.match,`${c}${g?`;options=${JSON.stringify(g)}`:""}`,!0),a=s(t["!match"],`${c}${g?`;options=${JSON.stringify(g)}`:""}`,!1);t.hookFunction&&(args=Function("args",t.hookFunction)(c)),!a&&e&&r(o,`on${n}`,`${c}${g?`;options=${JSON.stringify(g)}`:""}`,t)}return e.call(this,n,c,g)};for(const e of t)`on${e}`in window?n(o,`set:on${e}`):console.log(`[DOMLogger++] on${e} (event) does not exist!`)}},902:(o,t,e)=>{const{log:n,getConfig:r,getTargets:i,getOwnPropertyDescriptor:s,checkRegexs:c}=e(484);o.exports=(o,t)=>{const e=r(t);var[g,a]=i(t.split("."));if(!g||!(a in g))return void console.log(`[DOMLogger++] ${t} (function) does not exist!`);if("function"!=typeof g[a])return void console.log(`[DOMLogger++] ${t} is not a function!`);if(!s(g,a).configurable)return void console.log(`[DOMLogger++] ${t} is not configurable, can't hook it!`);const l=g[a];g[a]=new Proxy(g[a],{apply:function(r,i,s){const g=c(e.match,s,!0),a=c(e["!match"],s,!1);return e.hookFunction&&(s=Function("args",e.hookFunction)(s)),!a&&g&&n(o,t,JSON.stringify(s),e),Reflect.apply(l,i,s)}})}},484:o=>{const t=(o,t,e)=>{if(!o)return e;void 0===t&&(t="undefined"),"function"==typeof t&&(t=t.toString());for(let e of o){try{new RegExp(e)}catch{console.log(`[DOMLogger++] ${e} (regex) is invalid!`);continue}if(JSON.stringify(t).match(e))return!0}return!1};o.exports={log:async(o,e,n,r)=>{var i=(()=>{let o=(new Error).stack;return o=o.split("\n"),o.filter((o=>!o.includes("/src/bundle.js")))})();"Error"===i[0]&&i.shift();var s=i[0];if(s=await(async o=>{const t=(new TextEncoder).encode(o),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map((o=>o.toString(16).padStart(2,"0"))).join("")})(s),window?.domlogger_debug_canary===s)debugger;var c=!1,g=!1;if(r.alert){const o=t(r.alert.match,n,!0);!t(r.alert["!match"],n,!1)&&o&&(c=!0,r.alert.notification&&(g=!0))}let a={ext:"domlogger",date:Date.now(),href:location.href,type:o,frame:top===self?"top":"subframe",sink:e,data:n,trace:i,debug:s,badge:c,notification:g};window.originalPostMessage?window.originalPostMessage(a,"*"):window.postMessage(a,"*")},getConfig:o=>{var t=window.hooksConfig["*"]?window.hooksConfig["*"]:{},e=window.hooksConfig[o]?window.hooksConfig[o]:{};return Object.assign({},t,e)},getTargets:o=>{var t=o.pop(),e=window;"window"===o[0]&&o.shift();for(const t of o){if(!(t in e))return[null,null];e=e[t]}return[e,t]},getOwnPropertyDescriptor:(o,t)=>{for(;o;){const e=Object.getOwnPropertyDescriptor(o,t);if(e)return e;o=Object.getPrototypeOf(o)}},checkRegexs:t}}},t={};function e(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return o[n](i,i.exports,e),i.exports}(()=>{const o={function:e(902),class:e(437),attribute:e(11),event:e(88),custom:e(231)},t=new URL(document.currentScript.src),n=new URLSearchParams(t.search),r=JSON.parse(n.get("hookSettings"));window.hooksTargets=r.hooks,window.hooksConfig=r.config,window.domlogger_debug_canary=n.get("debugCanary");for(const[t,e]of Object.entries(window.hooksTargets))for(const[n,r]of Object.entries(e))if("event"!==n)for(const e of r)"postMessage"===e.split(".").pop()&&(window.originalPostMessage=window.postMessage),o[n](t,e);else o[n](t,r)})()})();