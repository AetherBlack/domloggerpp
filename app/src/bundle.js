(()=>{var o={54:(o,t,e)=>{const{log:n,getConfig:i,getTargets:r,getOwnPropertyDescriptor:s,checkRegexs:c,checkFunction:g}=e(191);o.exports=(o,t,e)=>{const a=i(o,t,e),u=e.split(":");e=u.pop();const[l,f]=r(e.split("."));if(!l||!(f in l))return void console.log(`[DOMLogger++] ${e} (attribute) does not exist!`);try{if("function"==typeof l[f])return void console.log(`[DOMLogger++] ${e} can't be a function or a class!`)}catch{}const d=s(l,f);if(d.configurable){var p;if(!d.set||!d.get)try{p=l[f]}catch{if(d.set||!d.get)return void console.log(`[DOMLogger++] ${e} can't be hook for now!`);if(u.includes("set"))return void console.log(`[DOMLogger++] Only the getter can be hooked for ${e}, remove set!`)}Object.defineProperty(l,f,{get:function(){return d.get?output=d.get.call(this):output=p,u.includes("get")&&(a.hookFunction&&g(a.hookFunction)&&(output=Function("output",a.hookFunction)(output)),n(o,t,`${this.nodeName?`get:${this.nodeName.toLowerCase()}.${f}`:e}`,output,a)),output},set:function(i){if(u.includes("set")&&i){const r=c(a.match,i,!0),s=c(a["!match"],i,!1);a.hookFunction&&(i=Function("args",a.hookFunction)(i)),!s&&r&&n(o,t,`${this.nodeName?`set:${this.nodeName.toLowerCase()}.${f}`:e}`,i,a)}return d.set?d.set.call(this,i):void(p=i)}})}else console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`)}},825:(o,t,e)=>{const{log:n,getConfig:i,getTargets:r,checkRegexs:s}=e(191);o.exports=(o,t,e)=>{const c=i(o,t,e),[g,a]=r(e.split(".")),u=s(c.match,g[a],!1),l=s(c["!match"],g[a],!1);u&&!l&&n(o,t,e,g[a],c)}},746:(o,t,e)=>{const{log:n,getConfig:i,getTargets:r,getOwnPropertyDescriptor:s,checkRegexs:c,checkFunction:g}=e(191);o.exports=(o,t,e)=>{const a=i(o,t,e);var[u,l]=r(e.split("."));u&&l in u?"function"==typeof u[l]?s(u,l).configurable?u[l]=new Proxy(u[l],{construct:function(i,r){const s=c(a.match,r,!0),u=c(a["!match"],r,!1);return a.hookFunction&&g(a.hookFunction)&&(r=Function("args",a.hookFunction)(r)),!u&&s&&n(o,t,e,r,a),new i(...r)}}):console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`):console.log(`[DOMLogger++] ${e} is not a class!`):console.log(`[DOMLogger++] ${e} (class) does not exist!`)}},3:(o,t,e)=>{const{log:n,getConfig:i,getTargets:r}=e(191),s={function:e(4),class:e(746),attribute:e(54)};o.exports=(o,t,e)=>{const c=e.split(":"),g=c.pop(),a=i(o,t,c.slice(1).join(":")),u=c.slice(1).pop(),l=setInterval((()=>{var[e,i]=r(u.split("."));e&&i in e&&(clearInterval(l),"attribute"!==c[0]||"set"!==c[1]&&"set"!==c[2]||n(o,t,c.slice(1).join(":"),e[i],a),s[c[0]](t,c.slice(1).join(":")))}),g)}},454:(o,t,e)=>{const n=e(54),{log:i,getConfig:r,stringify:s,checkRegexs:c,checkFunction:g}=e(191);o.exports=(o,t,e)=>{const a=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(n,u,l){if(e.includes(n)){const e=r(o,t,n),a=c(e.match,`${u}${l?`;options=${s(l)}`:""}`,!0),f=c(e["!match"],`${u}${l?`;options=${s(l)}`:""}`,!1);e.hookFunction&&g(e.hookFunction)&&(args=Function("args",e.hookFunction)(u)),!f&&a&&i(o,t,`on${n}`,`${u}${l?`;options=${s(l)}`:""}`,e)}return a.call(this,n,u,l)};for(const i of e)`on${i}`in window?n(o,t,`set:on${i}`):console.log(`[DOMLogger++] on${i} (event) does not exist!`)}},4:(o,t,e)=>{const{log:n,getConfig:i,getTargets:r,getOwnPropertyDescriptor:s,checkRegexs:c,checkFunction:g}=e(191);o.exports=(o,t,e)=>{const a=i(o,t,e);var[u,l]=r(e.split("."));if(!u||!(l in u))return void console.log(`[DOMLogger++] ${e} (function) does not exist!`);if("function"!=typeof u[l])return void console.log(`[DOMLogger++] ${e} is not a function!`);if(!s(u,l).configurable)return void console.log(`[DOMLogger++] ${e} is not configurable, can't hook it!`);const f=u[l];u[l]=new Proxy(u[l],{apply:function(i,r,s){const u=c(a.match,s,!0),l=c(a["!match"],s,!1);return a.hookFunction&&g(a.hookFunction)&&(s=Function("args",a.hookFunction)(s)),!l&&u&&n(o,t,e,s,a),Reflect.apply(f,r,s)}})}},191:o=>{const t=o=>(void 0===o?o="undefined":"function"==typeof o?o=o.toString():"string"!=typeof o&&(o=JSON.stringify(o)),o),e=(o,e,n)=>{if(!o)return n;e=t(e);for(let t of o){try{new RegExp(t)}catch{console.log(`[DOMLogger++] ${t} (regex) is invalid!`);continue}if(e.match(t))return!0}return!1};o.exports={log:async(o,n,i,r,s)=>{r=t(r);var c=(()=>{let o=(new Error).stack;return o=o.split("\n"),o.filter((o=>!o.includes("/src/bundle.js")))})();"Error"===c[0]&&c.shift();var g=c[0];if(g=await(async o=>{const t=(new TextEncoder).encode(o),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map((o=>o.toString(16).padStart(2,"0"))).join("")})(g),window?.domlogger_debug_canary===g)debugger;var a=!1,u=!1;if(s.alert){const o=e(s.alert.match,r,!0);!e(s.alert["!match"],r,!1)&&o&&(a=!0,s.alert.notification&&(u=!0))}let l={ext:"domlogger",date:Date.now(),href:location.href,type:n,hook:o,frame:top===self?"top":"subframe",sink:i,data:r,trace:c,debug:g,badge:a,notification:u};window.originalPostMessage?window.originalPostMessage(l,"*"):window.postMessage(l,"*")},getConfig:(o,t,e)=>{var n=window.hooksConfig["*"]?window.hooksConfig["*"]:{},i=window.hooksConfig[o]?window.hooksConfig[o]:{},r=window.hooksConfig[t]?window.hooksConfig[t]:{},s=window.hooksConfig[e]?window.hooksConfig[e]:{};return Object.assign({},n,i,r,s)},getTargets:o=>{var t=o.pop(),e=window;"window"===o[0]&&o.shift();for(const t of o){if(!(t in e))return[null,null];e=e[t]}return[e,t]},getOwnPropertyDescriptor:(o,t)=>{for(;o;){const e=Object.getOwnPropertyDescriptor(o,t);if(e)return e;o=Object.getPrototypeOf(o)}},stringify:t,checkRegexs:e,checkFunction:o=>{validCode=!0;try{Function(o)}catch{validCode=!1,console.log(`[DOMLogger++] ${t(o)} is an invalid code to evaluate!`)}return validCode}}}},t={};function e(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return o[n](r,r.exports,e),r.exports}(()=>{const o={function:e(4),class:e(746),attribute:e(54),event:e(454),checkContent:e(825),custom:e(3)},t=new URL(document.currentScript.src),n=new URLSearchParams(t.search),i=JSON.parse(atob(n.get("hookSettings")));window.hooksTargets=i.hooks,window.hooksConfig=i.config,window.domlogger_debug_canary=n.get("debugCanary");for(const[t,e]of Object.entries(window.hooksTargets))for(const[n,i]of Object.entries(e))if("event"!==n)for(const e of i)"postMessage"===e.split(".").pop()&&(window.originalPostMessage=window.postMessage),o[n](n,t,e);else o[n](n,t,i)})()})();